{
  "enabled": true,
  "name": "Diagn√≥stico de Bug com MCP",
  "description": "Quando o usu√°rio enviar uma URL de p√°gina e descri√ß√£o do erro (ex: \"em http://localhost:8080/user/inboxes a caixa de entrada n√£o est√° buscando\"), este hook ativa um fluxo de diagn√≥stico estruturado usando MCP para navegar nas p√°ginas e aplicar corre√ß√µes.",
  "version": "1",
  "when": {
    "type": "userPrompt"
  },
  "then": {
    "type": "askAgent",
    "prompt": "O usu√°rio reportou um bug com URL e descri√ß√£o. Siga este diagrama de diagn√≥stico:\n\n```mermaid\nflowchart TD\n    A[üì• Receber URL + Descri√ß√£o do Erro] --> B[üîç An√°lise Inicial]\n    B --> C{Usar MCP Browser?}\n    C -->|Sim| D[üåê Navegar para URL com MCP]\n    D --> E[üì∏ Capturar estado atual da p√°gina]\n    E --> F[üîé Inspecionar elementos relevantes]\n    F --> G[üìã Coletar logs do console]\n    G --> H[üß† Formular Hip√≥teses]\n    C -->|N√£o dispon√≠vel| H\n    \n    H --> I[Hip√≥tese 1: Problema no Frontend]\n    H --> J[Hip√≥tese 2: Problema na API/Backend]\n    H --> K[Hip√≥tese 3: Problema de Estado/Context]\n    H --> L[Hip√≥tese 4: Problema de Dados]\n    \n    I --> M[üîß Investigar Componentes React]\n    J --> N[üîß Verificar Rotas e Services]\n    K --> O[üîß Analisar Contexts e Hooks]\n    L --> P[üîß Checar Queries e Responses]\n    \n    M --> Q[üìù Documentar Causa Raiz]\n    N --> Q\n    O --> Q\n    P --> Q\n    \n    Q --> R[üí° Propor Corre√ß√£o]\n    R --> S{Usu√°rio Aprova?}\n    S -->|Sim| T[‚úÖ Aplicar Corre√ß√£o]\n    S -->|N√£o| U[üîÑ Refinar Hip√≥tese]\n    U --> H\n    T --> V[üß™ Testar com MCP]\n    V --> W{Resolvido?}\n    W -->|Sim| X[‚úÖ Conclu√≠do]\n    W -->|N√£o| U\n```\n\n**ETAPAS A SEGUIR:**\n\n1. **AN√ÅLISE INICIAL:**\n   - Extrair URL e descri√ß√£o do erro do prompt do usu√°rio\n   - Identificar qual p√°gina/componente est√° envolvido\n   - Mapear arquivos relevantes no projeto\n\n2. **NAVEGA√á√ÉO COM MCP (se dispon√≠vel):**\n   - Usar `mcp__puppeteer__puppeteer_navigate` para acessar a URL\n   - Usar `mcp__puppeteer__puppeteer_screenshot` para capturar estado\n   - Usar `mcp__puppeteer__puppeteer_evaluate` para inspecionar DOM e console\n\n3. **INVESTIGA√á√ÉO DE C√ìDIGO:**\n   - Localizar componente React correspondente √† rota\n   - Verificar hooks e services utilizados\n   - Analisar chamadas de API relacionadas\n   - Checar rotas backend correspondentes\n\n4. **HIP√ìTESES E DIAGN√ìSTICO:**\n   - Formular hip√≥teses baseadas nos dados coletados\n   - Priorizar por probabilidade\n   - Documentar evid√™ncias para cada hip√≥tese\n\n5. **CORRE√á√ÉO:**\n   - Propor solu√ß√£o espec√≠fica com c√≥digo\n   - Explicar o que ser√° alterado e por qu√™\n   - Aguardar aprova√ß√£o antes de aplicar\n\n6. **VALIDA√á√ÉO:**\n   - Ap√≥s corre√ß√£o, usar MCP para navegar novamente\n   - Verificar se o problema foi resolvido\n   - Documentar resultado\n\n**IMPORTANTE:** Sempre pergunte ao usu√°rio antes de aplicar corre√ß√µes. Documente cada etapa do diagn√≥stico."
  }
}